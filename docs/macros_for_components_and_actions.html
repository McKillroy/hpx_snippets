

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>HPX Macros for Components and Actions &mdash; HPX Cookbook 0.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> HPX Cookbook
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="about.html">Section 1 : About this Document and the associated Git Repository</a></li>
<li class="toctree-l1"><a class="reference internal" href="intro.html">Section 2 : Introduction to the Problem</a></li>
<li class="toctree-l1"><a class="reference internal" href="scalability.html">Section 3 : Scalability, Amdahls Law and the USL</a></li>
<li class="toctree-l1"><a class="reference internal" href="hpx_basics.html">Section 4 : HPX Basics</a></li>
<li class="toctree-l1"><a class="reference internal" href="concepts.html">Section 5: Helpful concepts to fully understand and leverage HPX</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Section 6 : A collection of HPX Recipes, HowTos and Drafts</a></li>
<li class="toctree-l1"><a class="reference internal" href="todo_list.html">Work Doc : Current ToDo List</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">HPX Cookbook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>HPX Macros for Components and Actions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/macros_for_components_and_actions.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="hpx-macros-for-components-and-actions">
<h1>HPX Macros for Components and Actions<a class="headerlink" href="#hpx-macros-for-components-and-actions" title="Permalink to this headline">¶</a></h1>
<p>When declaring and defining HPX components and -actions several macros are being used to create necessary boilerplate code. It is easy to get these wrong and make stupid mistakes, I am speaking out of experience!</p>
<p>In the end, once learned it is just a recipe to be applied. In the meantime it can be a debugging hell if you don’t know what you are doing.</p>
<p>The purpose of this document is to help others getting started with them and getting more secure about their use myself.</p>
<p>Several parameters influence how the macros should be used:</p>
<ul class="simple">
<li><p>Static versus dynamic Linkage</p></li>
<li><p>Component actions (from methods) versus plain actions (from free functions)</p></li>
<li><p>Having the source functions within a namespace or not.</p></li>
</ul>
<p>The following Macros are being used:</p>
<dl>
<dt>HPX_DECLARE_ACTION and HPX_DECLARE_PLAIN_ACTION</dt><dd><p>From <code class="docutils literal notranslate"><span class="pre">hpx/runtime/actions/basic_action.hpp</span></code> and <code class="docutils literal notranslate"><span class="pre">hpx/runtime/actions/plain_action.hpp</span></code>:</p>
<p><em>Undocumented</em></p>
</dd>
</dl>
<p><strong>Note:</strong> These macros after a chain of macros finally lead to HPX_DECLARE_ACTION_2 which ends up with a simple struct declaration where the name depends on the parameters:</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">name</span><span class="p">;</span>
</pre></div>
</div>
<p><strong>Typical Use Case:</strong> HK: yt?</p>
<dl class="simple">
<dt>HPX_DEFINE_PLAIN_ACTION</dt><dd><p>This macro is being used to define a plain action. <strong>This is the only macro which is allowed inside a namespace. All other macros MUST be used in the global namespace!</strong> Don’t confuse it with HPX_DECLARE_PLAIN_ACTION above!</p>
</dd>
</dl>
<p>Example use:</p>
<div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Some header file:</span>

<span class="k">namespace</span> <span class="n">app</span><span class="p">{</span>

  <span class="kt">void</span> <span class="n">my_free_function</span><span class="p">(</span> <span class="p">);</span>
  <span class="n">HPX_DEFINE_PLAIN_ACTION</span><span class="p">(</span> <span class="n">my_free_function</span><span class="p">,</span> <span class="n">my_free_function_action</span> <span class="p">);</span>

<span class="p">};</span>

<span class="c1">// Outside the namespace (!) :</span>
<span class="c1">// Assign a name to the action which is usable in serialization.</span>
<span class="c1">// The namespace double colons would pose a problem otherwise.</span>
<span class="c1">// It&#39;s a little bit like a typedef.</span>
<span class="n">HPX_REGISTER_ACTION_DECLARATION</span><span class="p">(</span><span class="n">app</span><span class="o">::</span><span class="n">my_free_function_action</span><span class="p">,</span> <span class="n">my_free_function_action</span><span class="p">)</span>
</pre></div>
</div>
<dl>
<dt>HPX_REGISTER_ACTION_DECLARATION</dt><dd><p>From <code class="docutils literal notranslate"><span class="pre">hpx/runtime/actions/basic_action.hpp</span></code>:</p>
<blockquote>
<div><p><em>“Declare the necessary component action boilerplate code.</em></p>
<p><em>The macro HPX_REGISTER_ACTION_DECLARATION can be used to declare all the boilerplate code which is required for proper functioning of component actions in the context of HPX.</em></p>
<p><em>The parameter action is the type of the action to declare the boilerplate for.</em></p>
<p><em>This macro can be invoked with an optional second parameter. This parameter specifies a unique name of the action to be used for serialization purposes. The second parameter has to be specified if the first parameter is not usable as a plain (non-qualified) C++ identifier, i.e. the first parameter contains special characters which cannot be part of a C++ identifier, such as ‘&lt;’, ‘&gt;’, or ‘:’.”</em></p>
</div></blockquote>
</dd>
</dl>
<p><strong>Note:</strong> The macro is also used for plain actions, not just component actions.</p>
<dl>
<dt>HPX_PLAIN_ACTION</dt><dd><p>From <code class="docutils literal notranslate"><span class="pre">hpx/runtime/actions/plain_action.hpp</span></code>:</p>
<p><em>Defines a plain action type based on the given function func and registers it with HPX.</em></p>
<p><em>The macro HPX_PLAIN_ACTION can be used to define a plain action (e.g. an action encapsulating a global or free function) based on the given function func. It defines the action type name representing the given function. This macro additionally registers the newly define action type with HPX.</em></p>
<p><em>The parameter func is a global or free (non-member) function which should be encapsulated into a plain action. The parameter name is the name of the action type defined by this macro.</em></p>
</dd>
</dl>
<p><strong>Note:</strong></p>
<dl>
<dt>HPX_PLAIN_ACTION_ID</dt><dd><p>From <code class="docutils literal notranslate"><span class="pre">hpx/runtime/actions/plain_action.hpp</span></code>:</p>
<p><em>Defines a plain action type based on the given function func and registers it with HPX.</em></p>
<p><em>The macro HPX_PLAIN_ACTION_ID can be used to define a plain action (e.g. an action encapsulating a global or free function) based on the given function func. It defines the action type actionname representing the given function.</em></p>
<p><em>The parameter actionid specifies an unique integer value which will be used to represent the action during serialization.</em></p>
<p><em>The parameter func is a global or free (non-member) function which should be encapsulated into a plain action. The parameter name is the name of the action type defined by this macro.</em></p>
<p><em>The second parameter has to be usable as a plain (non-qualified) C++ identifier, it should not contain special characters which cannot be part of a C++ identifier, such as ‘&lt;’, ‘&gt;’, or ‘:’.</em></p>
</dd>
</dl>
<p><strong>Note:</strong> Looks like combining HPX_DEFINE_PLAIN_ACTION with HPX_REGISTER_ACTION_DECLARATION. Is that correct?</p>
<dl>
<dt>HPX_REGISTER_ACTION</dt><dd><p>From <code class="docutils literal notranslate"><span class="pre">hpx/runtime/actions/basic_action.hpp</span></code>:</p>
<p><em>“Define the necessary component action boilerplate code.</em></p>
<p><em>The macro HPX_REGISTER_ACTION can be used to define all the boilerplate code which is required for proper functioning of component actions in the context of HPX.</em></p>
<p><em>The parameter action is the type of the action to define the boilerplate for.</em></p>
<p><em>This macro can be invoked with an optional second parameter. This parameter specifies a unique name of the action to be used for serialization purposes. The second parameter has to be specified if the first parameter is not usable as a plain (non-qualified) C++ identifier, i.e. the first parameter contains special characters which cannot be part of a C++ identifier, such as ‘&lt;’, ‘&gt;’, or ‘:’.</em></p>
<p><strong>Note:</strong> <em>This macro has to be used once for each of the component actions defined using one of the HPX_DEFINE_COMPONENT_ACTION or HPX_DEFINE_PLAIN_ACTION macros. It has to occur exactly once for each of the actions, thus it is recommended to place it into the source file defining the component. Only one of the forms of this macro HPX_REGISTER_ACTION or HPX_REGISTER_ACTION_ID should be used for a particular action, never both.”</em></p>
</dd>
</dl>
<ul>
<li><dl>
<dt>HPX_REGISTER_COMPONENT_MODULE</dt><dd><p>From <code class="docutils literal notranslate"><span class="pre">hpx/runtime/components/component_factory_base.hpp</span></code>:</p>
<p><em>This macro is used to define the required Hpx.Plugin entry points. This macro has to be used in exactly one compilation unit of a component module.</em></p>
</dd>
</dl>
</li>
<li><dl>
<dt>HPX_REGISTER_COMPONENT</dt><dd><p>From <code class="docutils literal notranslate"><span class="pre">hpx/runtime/components/component_factory.hpp</span></code>:</p>
<p><em>Undocumented</em></p>
</dd>
</dl>
</li>
</ul>
<div class="section" id="important-hpx-macros-by-file">
<h2>Important HPX Macros by file<a class="headerlink" href="#important-hpx-macros-by-file" title="Permalink to this headline">¶</a></h2>
<p>File: <code class="docutils literal notranslate"><span class="pre">basic_action.hpp</span></code></p>
<blockquote>
<div><div class="line-block">
<div class="line">HPX_REGISTER_ACTION</div>
<div class="line">HPX_REGISTER_ACTION_DECLARATION</div>
<div class="line">HPX_REGISTER_ACTION_ID</div>
</div>
</div></blockquote>
<p>File: <code class="docutils literal notranslate"><span class="pre">component_action.hpp</span></code></p>
<blockquote>
<div><p>HPX_DEFINE_COMPONENT_ACTION</p>
</div></blockquote>
<p>File: <code class="docutils literal notranslate"><span class="pre">plain_action.hpp</span></code></p>
<blockquote>
<div><div class="line-block">
<div class="line">HPX_DECLARE_PLAIN_ACTION</div>
<div class="line">HPX_DEFINE_PLAIN_ACTION</div>
<div class="line">HPX_PLAIN_ACTION</div>
<div class="line">HPX_PLAIN_ACTION_ID</div>
</div>
</div></blockquote>
<p>File: <code class="docutils literal notranslate"><span class="pre">component_commandline.hpp</span></code></p>
<blockquote>
<div><div class="line-block">
<div class="line">HPX_DEFINE_COMPONENT_COMMANDLINE_OPTIONS</div>
<div class="line">HPX_REGISTER_COMMANDLINE_MODULE</div>
<div class="line">HPX_REGISTER_COMMANDLINE_MODULE_DYNAMIC</div>
</div>
</div></blockquote>
<p>File: <code class="docutils literal notranslate"><span class="pre">component_commandline_base.hpp</span></code></p>
<blockquote>
<div><div class="line-block">
<div class="line">HPX_REGISTER_COMMANDLINE_OPTIONS</div>
<div class="line">HPX_REGISTER_COMMANDLINE_OPTIONS_DYNAMIC</div>
<div class="line">HPX_REGISTER_COMMANDLINE_REGISTRY</div>
<div class="line">HPX_REGISTER_COMMANDLINE_REGISTRY_DYNAMIC</div>
</div>
</div></blockquote>
<p>File: <code class="docutils literal notranslate"><span class="pre">component_factory.hpp</span></code></p>
<blockquote>
<div><div class="line-block">
<div class="line">HPX_REGISTER_COMPONENT</div>
<div class="line">HPX_REGISTER_COMPONENT_DYNAMIC</div>
<div class="line">HPX_REGISTER_DISABLED_COMPONENT_FACTORY</div>
<div class="line">HPX_REGISTER_DISABLED_COMPONENT_FACTORY_DYNAMIC</div>
<div class="line">HPX_REGISTER_ENABLED_COMPONENT_FACTORY</div>
<div class="line">HPX_REGISTER_ENABLED_COMPONENT_FACTORY_DYNAMIC</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_FACTORY</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_FACTORY_</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_FACTORY_1</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_FACTORY_2</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_FACTORY_3</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_FACTORY_DYNAMIC</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_FACTORY_DYNAMIC_</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_FACTORY_DYNAMIC_1</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_FACTORY_DYNAMIC_2</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_FACTORY_DYNAMIC_3</div>
</div>
</div></blockquote>
<p>File: <code class="docutils literal notranslate"><span class="pre">component_factory_base.hpp</span></code></p>
<blockquote>
<div><div class="line-block">
<div class="line">HPX_REGISTER_COMPONENT_FACTORY</div>
<div class="line">HPX_REGISTER_COMPONENT_MODULE</div>
<div class="line">HPX_REGISTER_COMPONENT_MODULE_DYNAMIC</div>
</div>
</div></blockquote>
<p>File: <code class="docutils literal notranslate"><span class="pre">component_registry.hpp</span></code></p>
<blockquote>
<div><div class="line-block">
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_REGISTRY</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_REGISTRY_</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_REGISTRY_2</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_REGISTRY_3</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_REGISTRY_DYNAMIC</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_REGISTRY_DYNAMIC_</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_REGISTRY_DYNAMIC_2</div>
<div class="line">HPX_REGISTER_MINIMAL_COMPONENT_REGISTRY_DYNAMIC_3</div>
</div>
</div></blockquote>
<p>File: <code class="docutils literal notranslate"><span class="pre">component_registry_base.hpp</span></code></p>
<blockquote>
<div><div class="line-block">
<div class="line">HPX_REGISTER_COMPONENT_REGISTRY</div>
<div class="line">HPX_REGISTER_COMPONENT_REGISTRY_DYNAMIC</div>
<div class="line">HPX_REGISTER_REGISTRY_MODULE</div>
<div class="line">HPX_REGISTER_REGISTRY_MODULE_DYNAMIC</div>
</div>
</div></blockquote>
<p>File: <code class="docutils literal notranslate"><span class="pre">component_startup_shutdown.hpp</span></code></p>
<blockquote>
<div><div class="line-block">
<div class="line">HPX_DEFINE_COMPONENT_STARTUP_SHUTDOWN</div>
<div class="line">HPX_REGISTER_SHUTDOWN_MODULE</div>
<div class="line">HPX_REGISTER_SHUTDOWN_MODULE_DYNAMIC</div>
<div class="line">HPX_REGISTER_STARTUP_MODULE</div>
<div class="line">HPX_REGISTER_STARTUP_MODULE_DYNAMIC</div>
<div class="line">HPX_REGISTER_STARTUP_SHUTDOWN_MODULE</div>
<div class="line">HPX_REGISTER_STARTUP_SHUTDOWN_MODULE_</div>
<div class="line">HPX_REGISTER_STARTUP_SHUTDOWN_MODULE_DYNAMIC</div>
</div>
</div></blockquote>
<p>File: <code class="docutils literal notranslate"><span class="pre">component_startup_shutdown_base.hpp</span></code></p>
<blockquote>
<div><div class="line-block">
<div class="line">HPX_REGISTER_STARTUP_SHUTDOWN_FUNCTIONS</div>
<div class="line">HPX_REGISTER_STARTUP_SHUTDOWN_FUNCTIONS_DYNAMIC</div>
<div class="line">HPX_REGISTER_STARTUP_SHUTDOWN_REGISTRY</div>
<div class="line">HPX_REGISTER_STARTUP_SHUTDOWN_REGISTRY_DYNAMIC</div>
</div>
</div></blockquote>
<p>File: <code class="docutils literal notranslate"><span class="pre">component_type.hpp</span></code></p>
<blockquote>
<div><div class="line-block">
<div class="line">HPX_DEFINE_COMPONENT_NAME</div>
<div class="line">HPX_DEFINE_COMPONENT_NAME_</div>
<div class="line">HPX_DEFINE_COMPONENT_NAME_2</div>
<div class="line">HPX_DEFINE_COMPONENT_NAME_3</div>
<div class="line">HPX_DEFINE_GET_COMPONENT_TYPE</div>
<div class="line">HPX_DEFINE_GET_COMPONENT_TYPE_STATIC</div>
<div class="line">HPX_DEFINE_GET_COMPONENT_TYPE_TEMPLATE</div>
</div>
</div></blockquote>
<p>File: <code class="docutils literal notranslate"><span class="pre">derived_component_factory.hpp</span></code></p>
<blockquote>
<div><div class="line-block">
<div class="line">HPX_REGISTER_DERIVED_COMPONENT_FACTORY</div>
<div class="line">HPX_REGISTER_DERIVED_COMPONENT_FACTORY_</div>
<div class="line">HPX_REGISTER_DERIVED_COMPONENT_FACTORY_3</div>
<div class="line">HPX_REGISTER_DERIVED_COMPONENT_FACTORY_4</div>
<div class="line">HPX_REGISTER_DERIVED_COMPONENT_FACTORY_DYNAMIC</div>
<div class="line">HPX_REGISTER_DERIVED_COMPONENT_FACTORY_DYNAMIC_</div>
<div class="line">HPX_REGISTER_DERIVED_COMPONENT_FACTORY_DYNAMIC_3</div>
<div class="line">HPX_REGISTER_DERIVED_COMPONENT_FACTORY_DYNAMIC_4</div>
</div>
</div></blockquote>
<p>File: <code class="docutils literal notranslate"><span class="pre">static_factory_data.hpp</span></code></p>
<blockquote>
<div><div class="line-block">
<div class="line">HPX_DECLARE_FACTORY_STATIC</div>
<div class="line">HPX_DEFINE_FACTORY_STATIC</div>
<div class="line">HPX_INIT_REGISTRY_COMMANDLINE_STATIC</div>
<div class="line">HPX_INIT_REGISTRY_FACTORY_STATIC</div>
<div class="line">HPX_INIT_REGISTRY_MODULE_STATIC</div>
<div class="line">HPX_INIT_REGISTRY_STARTUP_SHUTDOWN_STATIC</div>
</div>
</div></blockquote>
<p>File: <code class="docutils literal notranslate"><span class="pre">naming/address.hpp</span></code></p>
<blockquote>
<div><p>HPX_ADDRESS_VERSION</p>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Yorlik, https://github.com/McKillroy/hpx_snippets

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>